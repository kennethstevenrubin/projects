////////////////////////////////////////
// matrix

function Matrix() {

    this.data = [[1, 0, 0, 0], [0, 1, 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]];

    // Method multiplies a 4x4 by a 4x4 and stores the result in a 4x4.
    this.Mat_Mul = function (b,
        result) {

        // Just need an alias to the data.
        a = this.data;
        b = b.data;
        c = result.data;

        // First row.
        c[0][0] = a[0][0] * b[0][0] + a[0][1] * b[1][0] + a[0][2] * b[2][0];
        c[0][1] = a[0][0] * b[0][1] + a[0][1] * b[1][1] + a[0][2] * b[2][1];
        c[0][2] = a[0][0] * b[0][2] + a[0][1] * b[1][2] + a[0][2] * b[2][2];
        c[0][3] = 0;

        // Second row.
        c[1][0] = a[1][0] * b[0][0] + a[1][1] * b[1][0] + a[1][2] * b[2][0];
        c[1][1] = a[1][0] * b[0][1] + a[1][1] * b[1][1] + a[1][2] * b[2][1];
        c[1][2] = a[1][0] * b[0][2] + a[1][1] * b[1][2] + a[1][2] * b[2][2];
        c[1][3] = 0;

        // Third row.
        c[2][0] = a[2][0] * b[0][0] + a[2][1] * b[1][0] + a[2][2] * b[2][0];
        c[2][1] = a[2][0] * b[0][1] + a[2][1] * b[1][1] + a[2][2] * b[2][1];
        c[2][2] = a[2][0] * b[0][2] + a[2][1] * b[1][2] + a[2][2] * b[2][2];
        c[2][3] = 0;

        // Fourth row.
        c[3][0] = a[3][0] * b[0][0] + a[3][1] * b[1][0] + a[3][2] * b[2][0] + b[3][0];
        c[3][1] = a[3][0] * b[0][1] + a[3][1] * b[1][1] + a[3][2] * b[2][1] + b[3][1];
        c[3][2] = a[3][0] * b[0][2] + a[3][1] * b[1][2] + a[3][2] * b[2][2] + b[3][2];
        c[3][3] = 1;

    };

    // Method copies one 4x4 matrix to another.
    // TODO: Test this method....
    this.Mat_Copy = function (destination) {

        var a = destination.data;
        var b = this.data;

        a[0][0] = b[0][0];
        a[1][0] = b[1][0];
        a[2][0] = b[2][0];
        a[3][0] = b[3][0];

        a[0][1] = b[0][1];
        a[1][1] = b[1][1];
        a[2][1] = b[2][1];
        a[3][1] = b[3][1];

        a[0][2] = b[0][2];
        a[1][2] = b[1][2];
        a[2][2] = b[2][2];
        a[3][2] = b[3][2];

        a[0][3] = b[0][3];
        a[1][3] = b[1][3];
        a[2][3] = b[2][3];
        a[3][3] = b[3][3];

    };
}
